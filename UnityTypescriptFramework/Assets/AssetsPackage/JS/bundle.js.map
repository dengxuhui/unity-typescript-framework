{"version":3,"file":"bundle.js","sources":["../../../TsProj/src/Framework/Utils/Handler.ts","../../../TsProj/src/Example/ExHandler.ts","../../../TsProj/src/Main.ts"],"sourcesContent":["export default class Handler {\r\n    /*资源池*/\r\n    protected static _pool: Handler[] = [];\r\n    private static _guid: number = 1;\r\n\r\n    caller: object | null;\r\n    method: Function | null;\r\n    args: any[] | null;\r\n    once: boolean = false;\r\n    protected _id = 0;\r\n\r\n\r\n    /**\r\n     * 根据指定的属性值，创建一个 <code>Handler</code> 类的实例。\r\n     * @param    caller 执行域。\r\n     * @param    method 处理函数。\r\n     * @param    args 函数参数。\r\n     * @param    once 是否只执行一次。\r\n     */\r\n    constructor(caller: object | null = null, method: Function | null = null, args: any[] | null, once: boolean = false) {\r\n        this.set(caller, method, args, once);\r\n    }\r\n\r\n    /*\r\n    * @return 返回Handler实例\r\n    * */\r\n    private set(caller: any, method: Function | null, args: any[] | null, once = false): Handler {\r\n        this._id = Handler._guid++;\r\n        this.caller = caller;\r\n        this.method = method;\r\n        this.args = args;\r\n        this.once = once;\r\n        return this;\r\n    }\r\n\r\n    /*\r\n    * 直接执行\r\n    * */\r\n    run(): any {\r\n        if (this.method == null) return null;\r\n        let id: number = this._id;\r\n        let result: any = this.method.apply(this.caller, this.args);\r\n        this._id === id && this.once && this.recover();\r\n        return result;\r\n    }\r\n\r\n    /*\r\n    * 带参数的执行 自定义参数在后\r\n    * */\r\n    runWith(data: any): any {\r\n        if (this.method == null) return null;\r\n        let id: number = this._id;\r\n        let result: any;\r\n        if (data == null) {\r\n            result = this.method.apply(this.caller, this.args);\r\n        } else if (!this.args && !data.unshift) {\r\n            result = this.method.call(this.caller, data);\r\n        } else if (this.args) {\r\n            result = this.method.apply(this.caller, this.args.concat(data));\r\n        } else {\r\n            result = this.method.apply(this.caller, data)\r\n        }\r\n        this._id === id && this.once && this.recover();\r\n        return result;\r\n    }\r\n\r\n    /*\r\n    * 清理对象\r\n    * */\r\n    clear(): Handler {\r\n        this.caller = null;\r\n        this.method = null;\r\n        this.args = null;\r\n        return this;\r\n    }\r\n\r\n    /*\r\n    * 回收对象\r\n    * */\r\n    recover(): void {\r\n        if (this._id > 0) {\r\n            this._id = 0;\r\n            Handler._pool.push(this.clear());\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 从对象池内创建一个Handler，默认会执行一次并立即回收，如果不需要自动回收，设置once参数为false。\r\n     * @param    caller 执行域(this)。\r\n     * @param    method 回调方法。\r\n     * @param    args 携带的参数。\r\n     * @param    once 是否只执行一次，如果为true，回调后执行recover()进行回收，默认为true。\r\n     * @return  返回创建的handler实例。\r\n     */\r\n    static create(caller: any, method: Function | null, args: any[] | null = null, once: boolean = true): Handler {\r\n        if (Handler._pool.length)\r\n            return (Handler._pool.pop() as Handler).set(caller, method, args, once);\r\n        return new Handler(caller, method, args, once);\r\n    }\r\n}","import Handler from \"../Framework/Utils/Handler\";\r\n\r\nconst CS = require(\"csharp\");\r\n\r\n/*\r\n* Handler回调示例\r\n* */\r\nexport class ExHandler {\r\n    public static Run() {\r\n        let Debug = CS.UnityEngine.Debug;\r\n        let handler = Handler.create(null, (name) => {\r\n            Debug.LogFormat(\"get name is=>{0}\", name);\r\n        }, [\"Aer\"], true);\r\n        handler.run()\r\n    }\r\n}","﻿import Handler from \"./Framework/Utils/Handler\";\r\nimport {ExHandler} from \"./Example/ExHandler\";\r\n\r\nconst CS = require(\"csharp\");\r\nlet Debug = CS.UnityEngine.Debug;\r\n\r\nclass Main {\r\n    constructor() {\r\n        \r\n        //\r\n        ExHandler.Run();\r\n    }\r\n}\r\n\r\nnew Main();"],"names":["CS"],"mappings":"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"}