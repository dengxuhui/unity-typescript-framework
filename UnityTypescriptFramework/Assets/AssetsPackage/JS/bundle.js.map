{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///(webpack)/buildin/global.js","webpack:///./src/GameMain.ts","webpack:///./src/framework/UnityTs.ts","webpack:///./src/framework/resource/GameObjectPool.ts","webpack:///./src/framework/ui/UIManager.ts","webpack:///./src/framework/ui/component/UIBaseComponent.ts","webpack:///./src/framework/ui/component/UILayer.ts","webpack:///./src/framework/ui/config/UILayers.ts","webpack:///./src/framework/ui/util/UIUtil.ts","webpack:///./src/framework/unity/UnityTagsAndLayers.ts","webpack:///./src/framework/utils/EventDispatcher.ts","webpack:///./src/framework/utils/Handler.ts","webpack:///./src/framework/utils/timer/CallLater.ts","webpack:///./src/framework/utils/timer/Timer.ts","webpack:///external \"csharp\"","webpack:///external \"puerts\""],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/GameMain.ts\");\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import UnityTs from './framework/UnityTs';\r\nimport {CS} from \"csharp\";\r\n\r\nclass GameMain {\r\n    constructor() {\r\n        //初始化框架\r\n        UnityTs.init();\r\n        CS.Logger.Log(\"js start up newer!!\");\r\n    }\r\n}\r\n\r\nnew GameMain();","/* 全局类入口*/\r\n\r\nimport {TimerMgr} from \"./utils/timer/Timer\";\r\nimport {GameObjectPool} from './resource/GameObjectPool';\r\nimport UIManager from \"./ui/UIManager\";\r\n\r\nclass Utils {\r\n    /*id*/\r\n    static _gid: number = 1;\r\n    static _pi: number = 180 / Math.PI;\r\n    static _pi2: number = Math.PI / 180;\r\n    static _extReg: RegExp = /\\.(\\w+)\\??/g;\r\n\r\n    /*\r\n    * 角度转弧度\r\n    * */\r\n    public static toRadian(angle: number): number {\r\n        return angle * Utils._pi2;\r\n    }\r\n\r\n    /* \r\n    * 弧度转角度\r\n    * */\r\n    public static toAngle(radian: number): number {\r\n        return radian * Utils._pi;\r\n    }\r\n\r\n    /*\r\n    * 获取唯一id\r\n    * */\r\n    public static getGID(): number {\r\n        return Utils._gid++;\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     * <p>连接数组。和array的concat相比，此方法不创建新对象</p>\r\n     * <b>注意：</b>若 参数 a 不为空，则会改变参数 source 的值为连接后的数组。\r\n     * @param    source 待连接的数组目标对象。\r\n     * @param    array 待连接的数组对象。\r\n     * @return 连接后的数组。\r\n     */\r\n    public static concatArray(source: any[], array: any[]): any[] {\r\n        if (!array) return source;\r\n        if (!source) return array;\r\n        let i: number, len: number = array.length;\r\n        for (i = 0; i < len; i++) {\r\n            source.push(array[i]);\r\n        }\r\n        return source;\r\n    }\r\n}\r\n\r\nexport default class UnityTs {\r\n    /* 工具类*/\r\n    static utils: typeof Utils = Utils;\r\n\r\n    static init() {\r\n        TimerMgr.init();\r\n        GameObjectPool.Instance.initialize();\r\n        UIManager.Instance.initialize();\r\n    }\r\n}\r\n","import { UnityEngine } from \"csharp\";\r\nimport Handler from \"framework/utils/Handler\";\r\nimport { $promise, $typeof } from \"puerts\";\r\nimport { ISingleton } from '../interface/ISingleton';\r\n/*\r\n* GameObject资源池\r\n* */\r\nexport class GameObjectPool implements ISingleton {\r\n    public static Instance: GameObjectPool = new GameObjectPool();\r\n\r\n    private _cacheTransRoot = null;\r\n    private _goPool = new Map();\r\n    private _instCache: Map<string, Array<any>> = new Map<string, Array<any>>();\r\n    /**\r\n     * 密封构造函数\r\n     */\r\n    private constructor() {\r\n    }\r\n\r\n    /**\r\n     * 初始化\r\n     */\r\n    public initialize(): void {\r\n        let go = UnityEngine.GameObject.Find(\"GameObjectCacheRoot\");\r\n        if (go == (void 0)) {\r\n            go = new UnityEngine.GameObject(\"GameObjectCacheRoot\");\r\n            UnityEngine.Object.DontDestroyOnLoad(go);\r\n        }\r\n        this._cacheTransRoot = go.transform;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param path \r\n     * @returns bool\r\n     */\r\n    public checkHasCached(path: string): boolean {\r\n        let cachedInst: Array<any> = this._instCache.get(path);\r\n        if (cachedInst && cachedInst.length > 0) {\r\n            return true;\r\n        }\r\n        let pooledGo = this._goPool.get(path);\r\n        return pooledGo != (void 0);\r\n    }\r\n\r\n    /**\r\n     * 缓存并实例化GameObject\r\n     * @param path \r\n     * @param go \r\n     * @param inst_count \r\n     */\r\n    public cacheAndInstGameObject(path: string, go: any, inst_count: number = 1) {\r\n        //TODO 添加GameObject对于资源的引用\r\n        this._goPool.set(path, go);\r\n        if (inst_count > 0) {\r\n            let cachedInst: Array<any> = this._instCache.get(path);\r\n            for (let i: number = 0; i < inst_count; i++) {\r\n                let inst = UnityEngine.GameObject.Instantiate(go) as UnityEngine.GameObject;\r\n                inst.transform.SetParent(this._cacheTransRoot);\r\n                inst.SetActive(false);\r\n                cachedInst.push(inst);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 从缓存获取对象\r\n     * @param path\r\n     */\r\n    public tryGetFromCache(path: string): any {\r\n        if (!this.checkHasCached(path)) {\r\n            return null;\r\n        }\r\n        let cachedInst: Array<any> = this._instCache.get(path);\r\n        if (cachedInst != (void 0) && cachedInst.length > 0) {\r\n            let inst = cachedInst.pop();\r\n            return inst;\r\n        }\r\n        let pooledGo = this._goPool.get(path);\r\n        if (pooledGo != void 0) {\r\n            let inst = UnityEngine.GameObject.Instantiate(pooledGo);\r\n            return inst;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * 预加载GameObject\r\n     * @param path \r\n     * @param inst_count \r\n     * @param callback \r\n     * @returns \r\n     */\r\n    public async preLoadGameObjectAsync(path: string, inst_count: number, callback: Handler) {\r\n        if (this.checkHasCached(path)) {\r\n            callback && callback.run();\r\n            return;\r\n        }    \r\n        // let go = await ResourceManager.I.loadPrefabAsync(path);\r\n        // if (go != (void 0)) {\r\n        //     this.cacheAndInstGameObject(path, go, inst_count);\r\n        // }\r\n        // callback && callback.run();\r\n    }\r\n\r\n    /**\r\n     * 异步加载资源\r\n     * @param path \r\n     * @param callback \r\n     */\r\n    public async loadGameObjetAsync(path: string) {\r\n        let inst = this.tryGetFromCache(path);\r\n        if (inst == (void 0)) {\r\n            await this.preLoadGameObjectAsync(path, 1, null);\r\n        }\r\n        inst = this.tryGetFromCache(path);\r\n        inst.SetActive(true);\r\n        return inst;\r\n    }\r\n\r\n    /**\r\n     * 回收GameObject\r\n     * @param path \r\n     * @param inst \r\n     * @returns \r\n     */\r\n    public recycleGameObject(path: string, inst: UnityEngine.GameObject) {\r\n        if (inst == (void 0)) {\r\n            return;\r\n        }\r\n        inst.transform.SetParent(this._cacheTransRoot);\r\n        inst.SetActive(false);\r\n        let cachedInst = this._instCache.get(path) || [];\r\n        cachedInst.push(inst);\r\n        this._instCache.set(path, cachedInst);\r\n    }\r\n\r\n    public cleanup() {\r\n        this._instCache.forEach((arr: Array<any>, path: string) => {\r\n            for (let obj of arr) {\r\n                if (obj != (void 0)) {\r\n                    UnityEngine.GameObject.Destroy(obj);\r\n                }\r\n            }\r\n        });        \r\n        this._instCache.clear();\r\n        //清除cachePool中的GameObject引用\r\n    }\r\n}","import EventDispatcher from \"../utils/EventDispatcher\";\r\nimport {ISingleton} from \"../interface/ISingleton\";\r\nimport {UnityEngine} from \"csharp\";\r\nimport {EUILayer, UILayerInfo, UILayers} from \"./config/UILayers\";\r\nimport {UIWindow} from \"./UIWindow\";\r\nimport {UILayer} from \"./component/UILayer\";\r\nimport {$typeof} from \"puerts\";\r\nimport Handler from \"../utils/Handler\";\r\n\r\n/**\r\n * ui管理器系统：提供UI操作，UI层级管理\r\n */\r\nexport default class UIManager extends EventDispatcher implements ISingleton {\r\n    get uiCamera(): UnityEngine.Camera {\r\n        return this._uiCamera;\r\n    }\r\n\r\n    public static Instance: UIManager = new UIManager();\r\n    //ui场景根目录\r\n    static UIRootPath: string = \"UIRoot\";\r\n    //事件路径\r\n    static EventSystemPath: string = \"EventSystem\";\r\n    //camera路径\r\n    static UICameraPath = UIManager.UIRootPath + \"/UICamera\";\r\n    //分辨率\r\n    static Resolution = new UnityEngine.Vector2(750, 1334);\r\n    //窗口最大可使用的相对order_in_layer\r\n    static MaxOrderPerWindow: number = 10;\r\n\r\n    //所有窗口记录\r\n    private _allWindows: Array<UIWindow>;\r\n    //打开中的弹窗\r\n    private _openingDialogArray: Array<UIWindow>;\r\n    //ui摄像机\r\n    private _uiCamera: UnityEngine.Camera;\r\n    //层级map\r\n    private _layerMap: Map<EUILayer, UILayer>;\r\n    //根节点obj\r\n    private _gameObject: UnityEngine.GameObject;\r\n    //根节点trans\r\n    private _transform: UnityEngine.Transform;\r\n\r\n    // _layers\r\n    /**\r\n     * 密封构造函数\r\n     */\r\n    private constructor() {\r\n        super();\r\n    }\r\n\r\n    /**\r\n     * 初始化\r\n     */\r\n    public initialize(): void {\r\n        UILayers.set();\r\n        this._allWindows = new Array<UIWindow>();\r\n        this._openingDialogArray = new Array<UIWindow>();\r\n        this._layerMap = new Map<EUILayer, UILayer>();\r\n        this._gameObject = UnityEngine.GameObject.Find(UIManager.UIRootPath);\r\n        this._transform = this._gameObject.transform;\r\n        let cameraRoot = UnityEngine.GameObject.Find(UIManager.UICameraPath);\r\n        this._uiCamera = cameraRoot.GetComponent($typeof(UnityEngine.Camera)) as UnityEngine.Camera;\r\n        UnityEngine.Object.DontDestroyOnLoad(this._gameObject);\r\n        let eventSys = UnityEngine.GameObject.Find(UIManager.EventSystemPath);\r\n        UnityEngine.Object.DontDestroyOnLoad(eventSys);\r\n        UILayers.walk(Handler.create(this, (layer_info: UILayerInfo) => {\r\n            let go = new UnityEngine.GameObject(layer_info.name);\r\n            let trans = go.transform;\r\n            trans.SetParent(this._transform);\r\n            let newLayer = new UILayer(this, layer_info.name);\r\n            newLayer.onCreate(layer_info);\r\n            this._layerMap.set(layer_info.type, newLayer);\r\n        }, null, false));\r\n    }\r\n}","/**\r\n * ui基类\r\n */\r\nimport {CS, UnityEngine} from \"csharp\";\r\nimport {UILayer} from \"./UILayer\";\r\nimport {UIUtil} from \"../util/UIUtil\";\r\nimport {$typeof} from \"puerts\";\r\nimport {IUIComponent} from \"../../interface/IUIComponent\";\r\n\r\nexport class UIBaseComponent implements IUIComponent {\r\n    /**\r\n     * 窗口view层脚本\r\n     */\r\n    _view: UIBaseComponent;\r\n    /**\r\n     * 持有者\r\n     */\r\n    _holder: UIBaseComponent;\r\n    /**\r\n     * transform对应的gameObject\r\n     */\r\n    _gameObject: UnityEngine.GameObject;\r\n    /**\r\n     * transform组件\r\n     */\r\n    _transform: UnityEngine.Transform;\r\n    /**\r\n     * ui rectTrans组件\r\n     */\r\n    _rectTransform: UnityEngine.RectTransform;\r\n    /**\r\n     * 组件名字\r\n     */\r\n    _name: string;\r\n    /**\r\n     * 是否激活\r\n     */\r\n    _active: boolean;\r\n    /**\r\n     * 多重参数\r\n     * path,index,gameObject\r\n     */\r\n    _var_arg: any;\r\n\r\n    /**\r\n     * 添加组件\r\n     * @param holder\r\n     * @param var_arg\r\n     */\r\n    constructor(holder: UIBaseComponent, var_arg: any) {\r\n        this._holder = holder;\r\n        this._var_arg = var_arg;\r\n    }\r\n\r\n    destroy(): void {\r\n        this.onDestroy();\r\n    }\r\n\r\n    onDestroy(): void {\r\n        this._holder = null;\r\n        this._gameObject = null;\r\n        this._name = null;\r\n        this._view = null;\r\n        this._transform = null;\r\n    }\r\n\r\n    onCreate(): void {\r\n        if (this instanceof UILayer) {\r\n            this._view = null;\r\n        } else {\r\n            let now_holder = this._holder;\r\n            while (now_holder != null) {\r\n                if (now_holder instanceof UILayer) {\r\n                    this._view = this;\r\n                    break\r\n                } else if (now_holder._view != null) {\r\n                    this._view = now_holder._view;\r\n                    break\r\n                }\r\n                now_holder = now_holder._holder;\r\n            }\r\n        }\r\n        if (this._var_arg != null) {\r\n            if (typeof this._var_arg === \"string\") {\r\n                this._transform = UIUtil.findTrans(this._holder._transform, this._var_arg);\r\n                this._gameObject = this._transform.gameObject;\r\n            } else if (typeof this._var_arg === \"number\") {\r\n                this._transform = UIUtil.getChild(this._holder._transform, this._var_arg);\r\n                this._gameObject = this._transform.gameObject;\r\n            } else if (this._var_arg instanceof UnityEngine.GameObject) {\r\n                this._gameObject = this._var_arg;\r\n                this._transform = this._gameObject.transform;\r\n            } else {\r\n                CS.Logger.LogError(\"OnCreate:error params list!\");\r\n            }\r\n        }\r\n        this._var_arg = null;\r\n        this._name = this._gameObject.name;\r\n        this._rectTransform = UIUtil.findComponent(this._transform, $typeof(UnityEngine.RectTransform));\r\n    }\r\n\r\n    onDisable(): void {\r\n    }\r\n\r\n    onEnable(): void {\r\n    }\r\n\r\n    /**\r\n     * 设置激活与反激活\r\n     * @param active\r\n     */\r\n    public setActive(active: boolean) {\r\n        if (this._active == active) {\r\n            return;\r\n        }\r\n        this._active = active;\r\n        if (active) {\r\n            this._gameObject.SetActive(active);\r\n            this.onEnable();\r\n        } else {\r\n            this.onDisable();\r\n            this._gameObject.SetActive(active);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 获取是否激活\r\n     * @return boolean 是否激活\r\n     */\r\n    public getActive(): boolean {\r\n        return this._active;\r\n    }\r\n\r\n    /**\r\n     * 获取组件名字\r\n     */\r\n    public getName(): string {\r\n        return this._name;\r\n    }\r\n}","import {UIBaseComponent} from \"./UIBaseComponent\";\r\nimport {UnityEngine} from \"csharp\";\r\nimport {EUnityLayers, EUnitySortingLayers} from \"../../unity/UnityTagsAndLayers\";\r\nimport {UIUtil} from \"../util/UIUtil\";\r\nimport {$typeof} from \"puerts\";\r\nimport UIManager from \"../UIManager\";\r\nimport {IUIComponent} from \"../../interface/IUIComponent\";\r\nimport {UILayerInfo} from \"../config/UILayers\";\r\n\r\n/**\r\n * ts侧layer层级管理器\r\n */\r\nexport class UILayer extends UIBaseComponent implements IUIComponent {\r\n    //canvas组件\r\n    private _canvas: UnityEngine.Canvas;\r\n    //canvas缩放\r\n    private _canvasScaler: UnityEngine.UI.CanvasScaler;\r\n    //图形射线检测\r\n    private _graphicRaycater: UnityEngine.UI.GraphicRaycaster;\r\n    private _topWindowOrder: number;\r\n    private _minWindowOrder: number;\r\n\r\n    onCreate(...args: any[]): void {\r\n        super.onCreate();\r\n        this._gameObject.layer = EUnityLayers.UI;\r\n        this._canvas = this._gameObject.AddComponent($typeof(UnityEngine.Canvas)) as UnityEngine.Canvas;\r\n        this._transform = this._canvas.transform;\r\n        this._gameObject = this._canvas.gameObject;\r\n        let layer: UILayerInfo = args[0];\r\n        let canvas = this._canvas;\r\n        canvas.renderMode = UnityEngine.RenderMode.ScreenSpaceCamera;\r\n        canvas.worldCamera = UIManager.Instance.uiCamera;\r\n        canvas.planeDistance = layer.planeDistance;\r\n        canvas.sortingLayerName = EUnitySortingLayers.UI;\r\n        canvas.sortingOrder = layer.orderInLayer;\r\n        canvas.pixelPerfect = true;\r\n        //scaler\r\n        this._canvasScaler = UIUtil.findComponent(this._transform, $typeof(UnityEngine.UI.CanvasScaler));\r\n        if (this._canvasScaler == null) {\r\n            this._canvasScaler = this._gameObject.AddComponent($typeof(UnityEngine.UI.CanvasScaler)) as UnityEngine.UI.CanvasScaler;\r\n        }\r\n        let canvasScaler = this._canvasScaler;\r\n        canvasScaler.uiScaleMode = UnityEngine.UI.CanvasScaler.ScaleMode.ScaleWithScreenSize;\r\n        canvasScaler.referenceResolution = UIManager.Resolution;\r\n        canvasScaler.screenMatchMode = UnityEngine.UI.CanvasScaler.ScreenMatchMode.MatchWidthOrHeight;\r\n\r\n        //raycater\r\n        this._graphicRaycater = UIUtil.findComponent(this._transform, $typeof(UnityEngine.UI.GraphicRaycaster));\r\n        if (this._graphicRaycater == null) {\r\n            this._graphicRaycater = this._gameObject.AddComponent($typeof(UnityEngine.UI.GraphicRaycaster)) as UnityEngine.UI.GraphicRaycaster;\r\n        }\r\n\r\n        this._topWindowOrder = layer.orderInLayer;\r\n        this._minWindowOrder = layer.orderInLayer;\r\n    }\r\n\r\n    onDestroy(): void {\r\n        this._canvas = null;\r\n        this._canvasScaler = null;\r\n        this._graphicRaycater = null;\r\n        super.onDestroy();\r\n    }\r\n\r\n    public pushWindowOrder() {\r\n        this._topWindowOrder -= UIManager.MaxOrderPerWindow;\r\n    }\r\n\r\n    public popWindowOrder(): number {\r\n        let c = this._topWindowOrder;\r\n        this._topWindowOrder += UIManager.MaxOrderPerWindow;\r\n        return c;\r\n    }\r\n}","/**\r\n * UI层级信息数据\r\n */\r\nimport Handler from \"../../utils/Handler\";\r\n\r\nexport class UILayerInfo {\r\n    private constructor() {\r\n    }\r\n\r\n    /**\r\n     * 类型\r\n     */\r\n    type: EUILayer;\r\n    /**\r\n     * 名字 对应到Unity场景中的对象名\r\n     */\r\n    name: string;\r\n    planeDistance: number;\r\n    orderInLayer: number;\r\n}\r\n\r\nexport enum EUILayer {\r\n    //场景UI\r\n    SceneLayer,\r\n    //背景UI\r\n    BackgroundLayer,\r\n    //普通ui，多级窗口等\r\n    NormalLayer,\r\n    //信息ui\r\n    InfoLayer,\r\n    //弹窗提示\r\n    TipLayer,\r\n    //顶层ui，场景加载\r\n    TopLayer,\r\n}\r\n\r\n/**\r\n * 层级数据\r\n */\r\nexport class UILayers {\r\n    private constructor() {\r\n    }\r\n\r\n    static _layers: Map<EUILayer, UILayerInfo> = new Map<EUILayer, UILayerInfo>();\r\n\r\n    public static set() {\r\n        this._layers.set(EUILayer.SceneLayer, {\r\n            type: EUILayer.SceneLayer,\r\n            name: \"SceneLayer\",\r\n            planeDistance: 1000,\r\n            orderInLayer: 0\r\n        });\r\n        this._layers.set(EUILayer.BackgroundLayer, {\r\n            type: EUILayer.BackgroundLayer,\r\n            name: \"BackgroundLayer\",\r\n            planeDistance: 900,\r\n            orderInLayer: 1000\r\n        });\r\n        this._layers.set(EUILayer.NormalLayer, {\r\n            type: EUILayer.NormalLayer,\r\n            name: \"NormalLayer\",\r\n            planeDistance: 800,\r\n            orderInLayer: 2000\r\n        });\r\n        this._layers.set(EUILayer.InfoLayer, {\r\n            type: EUILayer.NormalLayer,\r\n            name: \"InfoLayer\",\r\n            planeDistance: 700,\r\n            orderInLayer: 3000\r\n        });\r\n        this._layers.set(EUILayer.TipLayer, {\r\n            type: EUILayer.TipLayer,\r\n            name: \"TipLayer\",\r\n            planeDistance: 600,\r\n            orderInLayer: 4000\r\n        });\r\n        this._layers.set(EUILayer.TopLayer, {\r\n            type: EUILayer.TopLayer,\r\n            name: \"TopLayer\",\r\n            planeDistance: 500,\r\n            orderInLayer: 5000\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 获取层级数据\r\n     * @param layer_type 层级定义\r\n     */\r\n    public static get(layer_type: EUILayer): UILayerInfo {\r\n        return UILayers._layers.get(layer_type);\r\n    }\r\n\r\n    /**\r\n     * 遍历\r\n     * @param callback\r\n     */\r\n    public static walk(callback: Handler) {\r\n        this._layers.forEach((v: UILayerInfo) => {\r\n            callback.runWith(v);\r\n        });\r\n    }\r\n}","import {System, TMPro, UnityEngine} from \"csharp\";\r\nimport {$typeof} from \"puerts\";\r\n\r\n/**\r\n * ui查询工具\r\n */\r\nexport class UIUtil {\r\n\r\n    /**\r\n     * 获取子节点\r\n     * @param trans\r\n     * @param index\r\n     */\r\n    public static getChild(trans: UnityEngine.Transform, index: number) {\r\n        return trans.GetChild(index);\r\n    }\r\n\r\n    /**\r\n     * 查组件\r\n     * @param trans\r\n     * @param ctype\r\n     * @param path\r\n     */\r\n    public static findComponent(trans: UnityEngine.Transform, ctype: System.Type, path?: string): any {\r\n        let targetTrans = trans;\r\n        if (path != null) {\r\n            targetTrans = trans.Find(path);\r\n        }\r\n        if (targetTrans == null) {\r\n            return null;\r\n        }\r\n        let cmp = targetTrans.GetComponent(ctype);\r\n        if (cmp != null) {\r\n            return cmp;\r\n        }\r\n        return targetTrans.GetComponentInChildren(ctype);\r\n    }\r\n\r\n    /**\r\n     * 获取transform\r\n     * @param trans\r\n     * @param path\r\n     */\r\n    public static findTrans(trans: UnityEngine.Transform, path: string): UnityEngine.Transform {\r\n        return trans.Find(path);\r\n    }\r\n\r\n    /**\r\n     * 查询文本\r\n     * @param trans\r\n     * @param path\r\n     */\r\n    public static findText(trans: UnityEngine.Transform, path?: string): UnityEngine.UI.Text {\r\n        return this.findComponent(trans, $typeof(UnityEngine.UI.Text), path);\r\n    }\r\n\r\n    /**\r\n     * 查询tmp文本\r\n     * @param trans\r\n     * @param path\r\n     */\r\n    public static findTmpText(trans: UnityEngine.Transform, path?: string): TMPro.TMP_Text {\r\n        return this.findComponent(trans, $typeof(TMPro.TMP_Text), path);\r\n    }\r\n\r\n    /**\r\n     * 查询图片\r\n     * @param trans\r\n     * @param path\r\n     */\r\n    public static findImage(trans: UnityEngine.Transform, path?: string): UnityEngine.UI.Image {\r\n        return this.findComponent(trans, $typeof(UnityEngine.UI.Image), path);\r\n    }\r\n\r\n    /**\r\n     * 查需按钮\r\n     * @param trans\r\n     * @param path\r\n     */\r\n    public static findButton(trans: UnityEngine.Transform, path?: string): UnityEngine.UI.Button {\r\n        return this.findComponent(trans, $typeof(UnityEngine.UI.Button), path);\r\n    }\r\n\r\n    /**\r\n     * 查询input\r\n     * @param trans\r\n     * @param path\r\n     */\r\n    public static findInput(trans: UnityEngine.Transform, path?: string): UnityEngine.UI.InputField {\r\n        return this.findComponent(trans, $typeof(UnityEngine.UI.InputField), path);\r\n    }\r\n\r\n    /**\r\n     * 查询slider\r\n     * @param trans\r\n     * @param path\r\n     */\r\n    public static findSlider(trans: UnityEngine.Transform, path?: string): UnityEngine.UI.Slider {\r\n        return this.findComponent(trans, $typeof(UnityEngine.UI.Slider), path);\r\n    }\r\n\r\n    /**\r\n     * 查询scrollRect\r\n     * @param trans\r\n     * @param path\r\n     */\r\n    public static findScrollRect(trans: UnityEngine.Transform, path?: string): UnityEngine.UI.ScrollRect {\r\n        return this.findComponent(trans, $typeof(UnityEngine.UI.ScrollRect), path);\r\n    }\r\n\r\n    /**\r\n     * 获取toggle\r\n     * @param trans\r\n     * @param path\r\n     */\r\n    public static findToggle(trans: UnityEngine.Transform, path?: string): UnityEngine.UI.Toggle {\r\n        return this.findComponent(trans, $typeof(UnityEngine.UI.Toggle), path);\r\n    }\r\n\r\n    /**\r\n     * 查询canvasGroup\r\n     * @param trans\r\n     * @param path\r\n     */\r\n    public static findCanvasGroup(trans: UnityEngine.Transform, path?: string): UnityEngine.CanvasGroup {\r\n        return this.findComponent(trans, $typeof(UnityEngine.CanvasGroup), path);\r\n    }\r\n}","/**\r\n * unity侧layer定义映射到ts侧\r\n */\r\nexport enum EUnityLayers {\r\n    Default,\r\n    /**\r\n     * 透明特效\r\n     */\r\n    TransparentFX,\r\n    /**\r\n     * 忽略射线检测层\r\n     */\r\n    IgnoreRaycast,\r\n    /**\r\n     * 水\r\n     */\r\n    Water = 4,\r\n    /**\r\n     * ui层\r\n     */\r\n    UI,\r\n}\r\n\r\n/**\r\n * unity侧sortingLayers定义\r\n */\r\nexport enum EUnitySortingLayers {\r\n    /**\r\n     * 默认层\r\n     */\r\n    Default = \"Default\",\r\n    /**\r\n     * ui层\r\n     */\r\n    UI = \"UI\",\r\n}","import Handler from \"./Handler\";\r\n\r\n/* \r\n* 可派发事件基类\r\n* */\r\nexport default class EventDispatcher {\r\n    private _events: any;\r\n\r\n    hasListener(type: string): boolean {\r\n        let listener: any = this._events && this._events[type];\r\n        return !!listener;\r\n    }\r\n\r\n    /**\r\n     * 派发事件。\r\n     * @param type    事件类型。\r\n     * @param data    （可选）回调数据。<b>注意：</b>如果是需要传递多个参数 p1,p2,p3,...可以使用数组结构如：[p1,p2,p3,...] ；如果需要回调单个参数 p ，且 p 是一个数组，则需要使用结构如：[p]，其他的单个参数 p ，可以直接传入参数 p。\r\n     * @return 此事件类型是否有侦听者，如果有侦听者则值为 true，否则值为 false。\r\n     */\r\n    public event(type: string, data: any = null): boolean {\r\n        if (!this._events || !this._events[type]) return false;\r\n\r\n        let listeners: any = this._events[type];\r\n        if (listeners.run) {\r\n            if (listeners.once) delete this._events[type];\r\n            data != null ? listeners.runWith(data) : listeners.run();\r\n        } else {\r\n            for (let i: number = 0, n: number = listeners.length; i < n; i++) {\r\n                let listener: Handler = listeners[i];\r\n                if (listener) {\r\n                    (data != null) ? listener.runWith(data) : listener.run();\r\n                }\r\n                if (!listener || listener.once) {\r\n                    listeners.splice(i, 1);\r\n                    i--;\r\n                    n--;\r\n                }\r\n            }\r\n            if (listeners.length === 0 && this._events) delete this._events[type];\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * 使用 EventDispatcher 对象注册指定类型的事件侦听器对象，以使侦听器能够接收事件通知。\r\n     * @param type        事件的类型。\r\n     * @param caller    事件侦听函数的执行域。\r\n     * @param listener    事件侦听函数。\r\n     * @param args        （可选）事件侦听函数的回调参数。\r\n     * @return 此 EventDispatcher 对象。\r\n     */\r\n    on(type: string, caller: any, listener: Function, args: any[] = null): EventDispatcher {\r\n        return this._createListener(type, caller, listener, args, false);\r\n    }\r\n\r\n    /**\r\n     * 使用 EventDispatcher 对象注册指定类型的事件侦听器对象，以使侦听器能够接收事件通知，此侦听事件响应一次后自动移除。\r\n     * @param type        事件的类型。\r\n     * @param caller    事件侦听函数的执行域。\r\n     * @param listener    事件侦听函数。\r\n     * @param args        （可选）事件侦听函数的回调参数。\r\n     * @return 此 EventDispatcher 对象。\r\n     */\r\n    once(type: string, caller: any, listener: Function, args: any[] = null): EventDispatcher {\r\n        return this._createListener(type, caller, listener, args, true);\r\n    }\r\n\r\n    /**@internal */\r\n    _createListener(type: string, caller: any, listener: Function, args: any[], once: boolean, offBefore: boolean = true): EventDispatcher {\r\n        //移除之前相同的监听\r\n        offBefore && this.off(type, caller, listener, once);\r\n\r\n        //使用对象池进行创建回收\r\n        let handler: Handler = EventHandler.create(caller || this, listener, args, once);\r\n        this._events || (this._events = {});\r\n\r\n        let events: any = this._events;\r\n        //默认单个，每个对象只有多个监听才用数组，节省一个数组的消耗\r\n        if (!events[type]) events[type] = handler;\r\n        else {\r\n            if (!events[type].run) events[type].push(handler);\r\n            else events[type] = [events[type], handler];\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * 从 EventDispatcher 对象中删除侦听器。\r\n     * @param type        事件的类型。\r\n     * @param caller    事件侦听函数的执行域。\r\n     * @param listener    事件侦听函数。\r\n     * @param onceOnly    （可选）如果值为 true ,则只移除通过 once 方法添加的侦听器。\r\n     * @return 此 EventDispatcher 对象。\r\n     */\r\n    off(type: string, caller: any, listener: Function, onceOnly: boolean = false): EventDispatcher {\r\n        if (!this._events || !this._events[type]) return this;\r\n        let listeners: any = this._events[type];\r\n        if (listeners != null) {\r\n            if (listeners.run) {\r\n                if ((!caller || listeners.caller === caller) && (listener == null || listeners.method === listener) && (!onceOnly || listeners.once)) {\r\n                    delete this._events[type];\r\n                    listeners.recover();\r\n                }\r\n            } else {\r\n                let count: number = 0;\r\n                let n = listeners.length;\r\n                for (let i: number = 0; i < n; i++) {\r\n                    let item: Handler = listeners[i];\r\n                    if (!item) {\r\n                        count++;\r\n                        continue;\r\n                    }\r\n                    if (item && (!caller || item.caller === caller) && (listener == null || item.method === listener) && (!onceOnly || item.once)) {\r\n                        count++;\r\n                        listeners[i] = null;\r\n                        item.recover();\r\n                    }\r\n                }\r\n                //如果全部移除，则删除索引\r\n                if (count === n) delete this._events[type];\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * 从 EventDispatcher 对象中删除指定事件类型的所有侦听器。\r\n     * @param type    （可选）事件类型，如果值为 null，则移除本对象所有类型的侦听器。\r\n     * @return 此 EventDispatcher 对象。\r\n     */\r\n    offAll(type: string = null): EventDispatcher {\r\n        let events: any = this._events;\r\n        if (!events) return this;\r\n        if (type) {\r\n            this._recoverHandlers(events[type]);\r\n            delete events[type];\r\n        } else {\r\n            for (let name in events) {\r\n                this._recoverHandlers(events[name]);\r\n            }\r\n            this._events = null;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * 移除caller为target的所有事件监听\r\n     * @param    caller caller对象\r\n     */\r\n    offAllCaller(caller: any): EventDispatcher {\r\n        if (caller && this._events) {\r\n            for (let name in this._events) {\r\n                this.off(name, caller, null);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n\r\n    private _recoverHandlers(arr: any): void {\r\n        if (!arr) return;\r\n        if (arr.run) {\r\n            arr.recover();\r\n        } else {\r\n            for (let i: number = arr.length - 1; i > -1; i--) {\r\n                if (arr[i]) {\r\n                    arr[i].recover();\r\n                    arr[i] = null;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**@private */\r\nclass EventHandler extends Handler {\r\n\r\n    /**@private handler对象池*/\r\n    protected static _pool: any[] = [];\r\n\r\n    constructor(caller: any, method: Function, args: any[], once: boolean) {\r\n        super(caller, method, args, once);\r\n    }\r\n\r\n    /**\r\n     * @override\r\n     */\r\n    recover(): void {\r\n        if (this._id > 0) {\r\n            this._id = 0;\r\n            EventHandler._pool.push(this.clear());\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 从对象池内创建一个Handler，默认会执行一次回收，如果不需要自动回收，设置once参数为false。\r\n     * @param caller    执行域(this)。\r\n     * @param method    回调方法。\r\n     * @param args        （可选）携带的参数。\r\n     * @param once        （可选）是否只执行一次，如果为true，回调后执行recover()进行回收，默认为true。\r\n     * @return 返回创建的handler实例。\r\n     */\r\n    static create(caller: any, method: Function, args: any[] = null, once: boolean = true): Handler {\r\n        if (EventHandler._pool.length) return EventHandler._pool.pop().setTo(caller, method, args, once);\r\n        return new EventHandler(caller, method, args, once);\r\n    }\r\n}","export default class Handler {\r\n    /*资源池*/\r\n    protected static _pool: Handler[] = [];\r\n    private static _guid: number = 1;\r\n\r\n    caller: object | null;\r\n    method: Function | null;\r\n    args: any[] | null;\r\n    once: boolean = false;\r\n    protected _id = 0;\r\n\r\n\r\n    /**\r\n     * 根据指定的属性值，创建一个 <code>Handler</code> 类的实例。\r\n     * @param    caller 执行域。\r\n     * @param    method 处理函数。\r\n     * @param    args 函数参数。\r\n     * @param    once 是否只执行一次。\r\n     */\r\n    constructor(caller: object | null = null, method: Function | null = null, args: any[] | null, once: boolean = false) {\r\n        this.set(caller, method, args, once);\r\n    }\r\n\r\n    /*\r\n    * @return 返回Handler实例\r\n    * */\r\n    private set(caller: any, method: Function | null, args: any[] | null, once = false): Handler {\r\n        this._id = Handler._guid++;\r\n        this.caller = caller;\r\n        this.method = method;\r\n        this.args = args;\r\n        this.once = once;\r\n        return this;\r\n    }\r\n\r\n    /*\r\n    * 直接执行\r\n    * */\r\n    run(): any {\r\n        if (this.method == null) return null;\r\n        let id: number = this._id;\r\n        let result: any = this.method.apply(this.caller, this.args);\r\n        this._id === id && this.once && this.recover();\r\n        return result;\r\n    }\r\n\r\n    /*\r\n    * 带参数的执行 自定义参数在后\r\n    * */\r\n    runWith(data: any): any {\r\n        if (this.method == null) return null;\r\n        let id: number = this._id;\r\n        let result: any;\r\n        if (data == null) {\r\n            result = this.method.apply(this.caller, this.args);\r\n        } else if (!this.args && !data.unshift) {\r\n            result = this.method.call(this.caller, data);\r\n        } else if (this.args) {\r\n            result = this.method.apply(this.caller, this.args.concat(data));\r\n        } else {\r\n            result = this.method.apply(this.caller, data)\r\n        }\r\n        this._id === id && this.once && this.recover();\r\n        return result;\r\n    }\r\n\r\n    /*\r\n    * 清理对象\r\n    * */\r\n    clear(): Handler {\r\n        this.caller = null;\r\n        this.method = null;\r\n        this.args = null;\r\n        return this;\r\n    }\r\n\r\n    /*\r\n    * 回收对象\r\n    * */\r\n    recover(): void {\r\n        if (this._id > 0) {\r\n            this._id = 0;\r\n            Handler._pool.push(this.clear());\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 从对象池内创建一个Handler，默认会执行一次并立即回收，如果不需要自动回收，设置once参数为false。\r\n     * @param    caller 执行域(this)。\r\n     * @param    method 回调方法。\r\n     * @param    args 携带的参数。\r\n     * @param    once 是否只执行一次，如果为true，回调后执行recover()进行回收，默认为true。\r\n     * @return  返回创建的handler实例。\r\n     */\r\n    static create(caller: any, method: Function | null, args: any[] | null = null, once: boolean = true): Handler {\r\n        if (Handler._pool.length)\r\n            return (Handler._pool.pop() as Handler).set(caller, method, args, once);\r\n        return new Handler(caller, method, args, once);\r\n    }\r\n}","import UnityTs from '../../UnityTs';\r\n/**\r\n * 延迟一帧执行\r\n */\r\nexport default class CallLater {\r\n    static I = new CallLater();\r\n    private static _mid: number = 1;\r\n    private _pool: LaterHandler[] = [];\r\n    private _map: { [key: string]: LaterHandler } = {};\r\n    private _laters: LaterHandler[] = [];\r\n\r\n    /**\r\n     * @internal\r\n     * 帧循环处理函数。\r\n     */\r\n    _update(): void {\r\n        let laters = this._laters;\r\n        let len = laters.length;\r\n        if (len > 0) {\r\n            for (let i = 0, n = len - 1; i <= n; i++) {\r\n                let handler = laters[i];\r\n                this._map[handler.key] = null;\r\n                if (handler.method !== null) {\r\n                    handler.run();\r\n                    handler.clear();\r\n                }\r\n                this._pool.push(handler);\r\n                i === n && (n = laters.length - 1);\r\n            }\r\n            laters.length = 0;\r\n        }\r\n    }\r\n\r\n    /** @private */\r\n    private _getHandler(caller: any, method: any): LaterHandler {\r\n        var cid: number = caller ? caller.$_GID || (caller.$_GID = UnityTs.utils.getGID()) : 0;\r\n        var mid: number = method.$_TID || (method.$_TID = (CallLater._mid++));\r\n        return this._map[cid + '.' + mid]\r\n    }\r\n\r\n    /**\r\n     * 延迟执行。\r\n     * @param\tcaller 执行域(this)。\r\n     * @param\tmethod 定时器回调函数。\r\n     * @param\targs 回调参数。\r\n     */\r\n    callLater(caller: any, method: Function, args: any[] = null): void {\r\n        if (this._getHandler(caller, method) == null) {\r\n            let handler: LaterHandler;\r\n            if (this._pool.length)\r\n                handler = this._pool.pop();\r\n            else\r\n                handler = new LaterHandler();\r\n            //设置属性\r\n            handler.caller = caller;\r\n            handler.method = method;\r\n            handler.args = args;\r\n            //索引handler\r\n            var cid: number = caller ? caller.$_GID : 0;\r\n            var mid: number = (method as any)[\"$_TID\"];\r\n            handler.key = cid + '.' + mid;\r\n            this._map[handler.key] = handler\r\n            //插入队列\r\n            this._laters.push(handler);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 立即执行 callLater 。\r\n     * @param\tcaller 执行域(this)。\r\n     * @param\tmethod 定时器回调函数。\r\n     */\r\n    runCallLater(caller: any, method: Function): void {\r\n        var handler = this._getHandler(caller, method);\r\n        if (handler && handler.method != null) {\r\n            this._map[handler.key] = null;\r\n            handler.run();\r\n            handler.clear();\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/** @private */\r\nclass LaterHandler {\r\n    key: string;\r\n    caller: any\r\n    method: Function;\r\n    args: any[];\r\n\r\n    clear(): void {\r\n        this.caller = null;\r\n        this.method = null;\r\n        this.args = null;\r\n    }\r\n\r\n    run(): void {\r\n        var caller = this.caller;\r\n        if (caller && caller.destroyed) return this.clear();\r\n        var method = this.method;\r\n        var args = this.args;\r\n        if (method == null) return;\r\n        args ? method.apply(caller, args) : method.call(caller);\r\n    }\r\n}","/*\r\n* \r\n* 时钟管理器 使用Utf.timer访问\r\n* */\r\nimport UnityTs from \"../../UnityTs\";\r\nimport CallLater from './CallLater';\r\n\r\nclass Timer {\r\n    /*timer入口*/\r\n    static gSysTimer: Timer = null;\r\n\r\n    /*对象池*/\r\n    private static _pool: any[] = [];\r\n    private static _mid: number = 1;\r\n\r\n    scale: number = 1;\r\n    currTimer: number = Date.now();\r\n    currFrame: number = 0;\r\n    /*两帧之间的时间间隔，单位：毫秒*/\r\n    _delta: number = 0;\r\n    _lastTimer: number = Date.now();\r\n\r\n    private _map: any[] = [];\r\n    private _handlers: any[] = [];\r\n    private _temp: any[] = [];\r\n    private _count: number = 0;\r\n\r\n    constructor(autoActive: boolean = true) {\r\n        autoActive && Timer.gSysTimer && Timer.gSysTimer.frameLoop(1, this, this._update);\r\n    }\r\n\r\n    /* 获取两帧之间的时间间隔，单位毫秒*/\r\n    get delta(): number {\r\n        return this._delta;\r\n    }\r\n\r\n    /* 帧循环*/\r\n    _update(): void {\r\n        if (this.scale <= 0) {\r\n            this._lastTimer = Date.now();\r\n            this._delta = 0;\r\n            return;\r\n        }\r\n        let frame: number = this.currFrame = this.currFrame + this.scale;\r\n        let now: number = Date.now();\r\n        let awake: boolean = (now - this._lastTimer) > 30000;\r\n        this._delta = (now - this._lastTimer) * this.scale;\r\n        let timer: number = this.currTimer = this.currTimer + this._delta;\r\n        this._lastTimer = now;\r\n\r\n        let handlers: any[] = this._handlers;\r\n        this._count = 0;\r\n        for (let i: number = 0, n: number = handlers.length; i < n; i++) {\r\n            let handler: TimerHandler = handlers[i];\r\n            if (handler.method !== null) {\r\n                let t: number = handler.useFrame ? frame : timer;\r\n                if (t >= handler.exeTime) {\r\n                    if (handler.repeat) {\r\n                        if (!handler.jumpFrame || awake) {\r\n                            handler.exeTime += handler.delay;\r\n                            handler.run(false);\r\n                            if (t > handler.exeTime) {\r\n                                handler.exeTime += Math.ceil((t - handler.exeTime) / handler.delay) * handler.delay;\r\n                            }\r\n                        } else {\r\n                            // 一帧可多次执行的情况。\r\n                            while (t >= handler.exeTime) {\r\n                                handler.exeTime += handler.delay;\r\n                                handler.run(false)\r\n                            }\r\n                        }\r\n                    } else {\r\n                        handler.run(true);\r\n                    }\r\n                }\r\n            } else {\r\n                this._count++;\r\n            }\r\n        }\r\n\r\n        if (this._count > 30 || frame % 200 === 0) this._clearHandlers();\r\n    }\r\n\r\n    /*整理handlers数组*/\r\n    _clearHandlers(): void {\r\n        let handlers: any[] = this._handlers;\r\n        for (let i: number = 0, n: number = handlers.length; i < n; i++) {\r\n            let handler: TimerHandler = handlers[i];\r\n            if (handler.method !== null) this._temp.push(handler);\r\n            else this._recoverHandler(handler);\r\n        }\r\n        this._handlers = this._temp;\r\n        handlers.length = 0;\r\n        this._temp = handlers;\r\n    }\r\n\r\n    /*回收handler*/\r\n    _recoverHandler(handler: TimerHandler): void {\r\n        if (this._map[handler.key] == handler) this._map[handler.key] = null;\r\n        handler.clear();\r\n        Timer._pool.push(handler);\r\n    }\r\n\r\n    /* 创建TimerHandler实例*/\r\n    _create(useFrame: boolean, repeat: boolean, delay: number, caller: any, method: Function, args: any[], coverBefore: boolean): TimerHandler {\r\n        if (!delay) {\r\n            method.apply(caller, args);\r\n            return null;\r\n        }\r\n        let handler: TimerHandler;\r\n        if (coverBefore) {\r\n            handler = this._getHandler(caller, method);\r\n            if (handler) {\r\n                handler.repeat = repeat;\r\n                handler.useFrame = useFrame;\r\n                handler.delay = delay;\r\n                handler.caller = caller;\r\n                handler.method = method;\r\n                handler.args = args;\r\n                handler.exeTime = delay + (useFrame ? this.currFrame : this.currTimer + Date.now() - this._lastTimer);\r\n                return handler;\r\n            }\r\n        }\r\n        handler = Timer._pool.length > 0 ? Timer._pool.pop() : new TimerHandler();\r\n        handler.repeat = repeat;\r\n        handler.useFrame = useFrame;\r\n        handler.delay = delay;\r\n        handler.caller = caller;\r\n        handler.method = method;\r\n        handler.args = args;\r\n        handler.exeTime = delay + (useFrame ? this.currFrame : this.currTimer + Date.now() - this._lastTimer);\r\n\r\n        this._indexHandler(handler);\r\n        this._handlers.push(handler);\r\n        return handler;\r\n    }\r\n\r\n    /*获取handler*/\r\n    _getHandler(caller: any, method: any): TimerHandler {\r\n        let cid: number = caller ? caller.$_GID || (caller.$_GID = UnityTs.utils.getGID()) : 0;\r\n        let mid: number = method.$_TID || (method.$_TID = (Timer._mid++) * 100000);\r\n        return this._map[cid + mid];\r\n    }\r\n\r\n    /*\r\n    * 索引handler\r\n    * */\r\n    _indexHandler(handler: TimerHandler) {\r\n        let caller: any = handler.caller;\r\n        let method: any = handler.method;\r\n        let cid: number = caller ? caller.$_GID || (caller.$_GID = UnityTs.utils.getGID()) : 0;\r\n        let mid: number = method.$_TID || (method.$_TID = (Timer._mid++) * 100000);\r\n        handler.key = cid + mid;\r\n        this._map[handler.key] = handler;\r\n    }\r\n\r\n\r\n    /**\r\n     * 定时执行一次。\r\n     * @param    delay    延迟时间(单位为毫秒)。\r\n     * @param    caller    执行域(this)。\r\n     * @param    method    定时器回调函数。\r\n     * @param    args    回调参数。\r\n     * @param    coverBefore    是否覆盖之前的延迟执行，默认为 true 。\r\n     */\r\n    once(delay: number, caller: any, method: Function, args: any[] = null, coverBefore: boolean = true): void {\r\n        this._create(false, false, delay, caller, method, args, coverBefore);\r\n    }\r\n\r\n    /**\r\n     * 定时重复执行。\r\n     * @param    delay    间隔时间(单位毫秒)。\r\n     * @param    caller    执行域(this)。\r\n     * @param    method    定时器回调函数。\r\n     * @param    args    回调参数。\r\n     * @param    coverBefore    是否覆盖之前的延迟执行，默认为 true 。\r\n     * @param    jumpFrame 时钟是否跳帧。基于时间的循环回调，单位时间间隔内，如能执行多次回调，出于性能考虑，引擎默认只执行一次，设置jumpFrame=true后，则回调会连续执行多次\r\n     */\r\n    loop(delay: number, caller: any, method: Function, args: any[] = null, coverBefore: boolean = true, jumpFrame: boolean = false): void {\r\n        const handler: TimerHandler = this._create(false, true, delay, caller, method, args, coverBefore);\r\n        if (handler) handler.jumpFrame = jumpFrame;\r\n    }\r\n\r\n    /**\r\n     * 定时执行一次(基于帧率)。\r\n     * @param    delay    延迟几帧(单位为帧)。\r\n     * @param    caller    执行域(this)。\r\n     * @param    method    定时器回调函数。\r\n     * @param    args    回调参数。\r\n     * @param    coverBefore    是否覆盖之前的延迟执行，默认为 true 。\r\n     */\r\n    frameOnce(delay: number, caller: any, method: Function, args: any[] = null, coverBefore: boolean = true): void {\r\n        this._create(true, false, delay, caller, method, args, coverBefore);\r\n    }\r\n\r\n    /**\r\n     * 定时重复执行(基于帧率)。\r\n     * @param    delay    间隔几帧(单位为帧)。\r\n     * @param    caller    执行域(this)。\r\n     * @param    method    定时器回调函数。\r\n     * @param    args    回调参数。\r\n     * @param    coverBefore    是否覆盖之前的延迟执行，默认为 true 。\r\n     */\r\n    frameLoop(delay: number, caller: any, method: Function, args: any[] = null, coverBefore: boolean = true): void {\r\n        this._create(true, true, delay, caller, method, args, coverBefore);\r\n    }\r\n\r\n    /** 返回统计信息。*/\r\n    toString(): string {\r\n        return \" handlers:\" + this._handlers.length + \" pool:\" + Timer._pool.length;\r\n    }\r\n\r\n    /**\r\n     * 清理定时器。\r\n     * @param    caller 执行域(this)。\r\n     * @param    method 定时器回调函数。\r\n     */\r\n    clear(caller: any, method: Function): void {\r\n        let handler: TimerHandler = this._getHandler(caller, method);\r\n        if (handler) {\r\n            this._map[handler.key] = null;\r\n            handler.key = 0;\r\n            handler.clear();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 清理对象身上的所有定时器。\r\n     * @param    caller 执行域(this)。\r\n     */\r\n    clearAll(caller: any): void {\r\n        if (!caller) return;\r\n        let i: number = 0;\r\n        const n: number = this._handlers.length;\r\n        for (; i < n; i++) {\r\n            const handler: TimerHandler = this._handlers[i];\r\n            if (handler.caller === caller) {\r\n                this._map[handler.key] = null;\r\n                handler.key = 0;\r\n                handler.clear();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 立即提前执行定时器，执行之后从队列中删除\r\n     * @param    caller 执行域(this)。\r\n     * @param    method 定时器回调函数。\r\n     */\r\n    runTimer(caller: any, method: Function): void {\r\n        const handler: TimerHandler = this._getHandler(caller, method);\r\n        if (handler && handler.method != null) {\r\n            this._map[handler.key] = null;\r\n            handler.run(true);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 暂停时钟\r\n     */\r\n    pause(): void {\r\n        this.scale = 0;\r\n    }\r\n\r\n    /**\r\n     * 恢复时钟\r\n     */\r\n    resume(): void {\r\n        this.scale = 1;\r\n    }\r\n\r\n    //-----------延迟执行\r\n\r\n    /**\r\n     * 延迟执行。\r\n     * @param\tcaller 执行域(this)。\r\n     * @param\tmethod 定时器回调函数。\r\n     * @param\targs 回调参数。\r\n     */\r\n    callLater(caller: any, method: Function, args?: any[]): void {\r\n        CallLater.I.callLater(caller, method, args);\r\n    }\r\n\r\n    /**\r\n     * 立即执行 callLater 。\r\n     * @param\tcaller 执行域(this)。\r\n     * @param\tmethod 定时器回调函数。\r\n     */\r\n    runCallLater(caller: any, method: Function): void {\r\n        CallLater.I.runCallLater(caller, method);\r\n    }\r\n}\r\n\r\n/* 私有timer函数类*/\r\nclass TimerHandler {\r\n    key: number;\r\n    repeat: boolean;\r\n    delay: number;\r\n    useFrame: boolean;\r\n    exeTime: number;\r\n    caller: any;\r\n    method: Function;\r\n    args: any[];\r\n    jumpFrame: boolean;\r\n\r\n    clear(): void {\r\n        this.caller = null;\r\n        this.method = null;\r\n        this.args = null;\r\n    }\r\n\r\n    run(withClear: boolean): void {\r\n        let caller: any = this.caller;\r\n        if (caller && caller.destroyed) return this.clear();\r\n        let method: Function = this.method;\r\n        let args: any[] = this.args;\r\n        withClear && this.clear();\r\n        if (method == null) return;\r\n        args ? method.apply(caller, args) : method.call(caller);\r\n    }\r\n}\r\n\r\n/*\r\n* \r\n* timer管理器 如果需要新增timer，在这里新建实例，一般一个就够用了。\r\n* */\r\nexport class TimerMgr {\r\n    static _timer: Timer;\r\n    private static _inited: boolean = false;\r\n    //私有构造函数\r\n    private constructor() {\r\n    }\r\n    /*\r\n    * 获取timer唯一实例\r\n    * */\r\n    public static get timer() {\r\n        return this._timer;\r\n    }\r\n\r\n    public static init() {\r\n        if (this._inited) {\r\n            return;\r\n        }\r\n        this._inited = true;\r\n        this._timer = new Timer();\r\n        // @ts-ignore\r\n        global.__tgjsRegisterTickHandler(uts_timerUpdate);\r\n        // @ts-ignore\r\n        delete global.__tgjsRegisterTickHandler;\r\n    }\r\n}\r\n\r\nfunction uts_timerUpdate(){\r\n    TimerMgr._timer._update();\r\n}","module.exports = require(\"csharp\");","module.exports = require(\"puerts\");"],"sourceRoot":""}